<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="" >

<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
          <title>kiwi wiki – Input remapping with keyd</title>

  <style>
         pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #abb0b6;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #abb0b6;  padding-left: 4px; }
div.sourceCode
  { color: #575f66; background-color: #fafafa; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #f29718; font-weight: bold; } /* Alert */
code span.an { color: #d3423e; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #d3423e; } /* Attribute */
code span.bn { color: #f29718; } /* BaseN */
code span.bu { color: #399ee6; } /* BuiltIn */
code span.cf { color: #f29718; font-weight: bold; } /* ControlFlow */
code span.ch { color: #86b300; } /* Char */
code span.cn { color: #f29718; } /* Constant */
code span.co { color: #abb0b6; font-style: italic; } /* Comment */
code span.cv { color: #abb0b6; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #abb0b6; font-style: italic; } /* Documentation */
code span.dt { color: #575f66; } /* DataType */
code span.dv { color: #f29718; } /* DecVal */
code span.er { color: #575f66; font-weight: bold; } /* Error */
code span.ex { color: #575f66; } /* Extension */
code span.fl { color: #f29718; } /* Float */
code span.fu { color: #399ee6; } /* Function */
code span.im { color: #399ee6; font-weight: bold; } /* Import */
code span.in { color: #abb0b6; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #f29718; font-weight: bold; } /* Keyword */
code span.op { color: #575f66; } /* Operator */
code span.ot { color: #f29718; } /* Other */
code span.pp { color: #f29718; } /* Preprocessor */
code span.sc { color: #575f66; } /* SpecialChar */
code span.ss { color: #86b300; } /* SpecialString */
code span.st { color: #86b300; } /* String */
code span.va { color: #d3423e; } /* Variable */
code span.vs { color: #86b300; } /* VerbatimString */
code span.wa { color: #abb0b6; font-weight: bold; font-style: italic; } /* Warning */   </style>

    <link rel="stylesheet" href="/kiwi-wiki/styles/wiki.css" />
    <link rel="stylesheet" href="/kiwi-wiki/styles/fonts.css" />
  
  
  </head>

<body>
  
  <!--   <header id="title-block-header">
    <h1 class="title">Input remapping with keyd</h1>
                  </header>
   -->

  <div class="body-flexbox">
    <header>
      <div class="article-description">
        <h1 class="title">Input remapping with keyd</h1>
                <nav id="TOC" role="doc-toc">
                    <ul>
                    <li><a href="#top" id="toc-top">(Top)</a></li>
                    <li><a href="#installation"
                    id="toc-installation">Installation</a></li>
                    <li><a href="#configuration"
                    id="toc-configuration">Configuration</a>
                    <ul>
                    <li><a href="#finding-device-ids-and-key-names"
                    id="toc-finding-device-ids-and-key-names">Finding
                    device ids and key names</a></li>
                    <li><a href="#mapping-capslock"
                    id="toc-mapping-capslock">Mapping
                    <code>capslock</code></a></li>
                    <li><a href="#using-second-layer-on-logitech-g304"
                    id="toc-using-second-layer-on-logitech-g304">Using
                    second layer on Logitech G304</a></li>
                    </ul></li>
                    </ul>
        </nav>
              </div>
      <div class="kiwi-wiki-description">
        <h2>kiwi wiki</h2>
        <p>
          A wiki / archive / library / blog of my interests.<br />
          Not technically a wiki, but the name fit well with kiwi.
        </p>
        <span class="site-links">
          <a href="/kiwi-wiki">index</a>
          <a href="/">homepage</a>
          <a href="https://github.com/c-sooyoung">github</a>
        </span>
      </div>
    </header>

    <main>
      <h2 class="top-marker" id="top">(Top)</h2>
      <p>Of the input remapping methods I’ve tried, <a
      href="https://github.com/rvaiya/keyd" class="external"
      target="_blank">keyd</a> usage and configuration was by far the
      most intuitive and painless, while also being powerful. It can not
      only remap keys, but also has an easy and flexible layer system,
      macros, key timing, and even mouse inputs.</p>
      <blockquote>
      <p><strong>Description</strong></p>
      <p>keyd is a system wide key remapping daemon which supports
      features like layering, oneshot modifiers, and macros. In its most
      basic form it can be used to define a custom key layout that
      persists across display server boundaries (e.g wayland/X/tty).</p>
      <p>The program runs in the foreground, printing diagnostic
      information to the standard output streams, and is intended to be
      run as a single instance managed by the init system.</p>
      <p><strong>NOTE:</strong></p>
      <p>Because keyd modifies your primary input device, it is possible
      to render your machine unusable with a bad config file. If you
      find yourself in this situation the panic sequence
      <strong>&lt;backspace&gt;+&lt;escape&gt;+&lt;enter&gt;</strong>
      will force keyd to terminate.</p>
      <p>From keyd(1) <a href="https://man.archlinux.org/man/keyd.1.en"
      class="external" target="_blank">manual</a></p>
      </blockquote>
      <h2 id="installation">Installation</h2>
      <p>There <em>is</em> a <a
      href="https://copr.fedorainfracloud.org/coprs/alternateved/keyd"
      class="external" target="_blank">COPR repository</a> for keyd, but
      it didn’t make the proper directories
      (e.g. <code>/etc/keyd</code>).</p>
      <div class="sourceCode" id="cb1"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/rvaiya/keyd <span class="co"># --branch v2.5.0</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> keyd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> make install</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable keyd <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> systemctl start keyd</span></code></pre></div>
      <p>To uninstall:</p>
      <div class="sourceCode" id="cb2"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl stop keyd <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> systemctl disable keyd</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> make uninstall</span></code></pre></div>
      <h2 id="configuration">Configuration</h2>
      <h3 id="finding-device-ids-and-key-names">Finding device ids and
      key names</h3>
      <div class="sourceCode" id="cb3"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> keyd monitor</span></code></pre></div>
      <h3 id="mapping-capslock">Mapping <code>capslock</code></h3>
      <ul>
      <li><code>capslock</code> to <code>hangeul</code></li>
      <li><code>ctrl</code> + <code>capslock</code> for changing input
      sources</li>
      </ul>
      <pre><code># /etc/keyd/default.conf

[ids]
&lt;keyboard id&gt;

[main]
capslock = hangeul

[control]
# for changing input sources (e.g. japanese)
# equivalent to macro(leftmeta+space)
capslock = M-space</code></pre>
      <h3 id="using-second-layer-on-logitech-g304">Using second layer on
      Logitech G304</h3>
      <pre><code># /etc/keyd/g304.conf

[ids]
&lt;mouse id&gt;

[main]
mouseforward = layer(gshift)

[gshift]
leftmouse = macro(leftcontrol+leftalt+up)
...</code></pre>
    </main>
  </div>

  
</body>

</html>